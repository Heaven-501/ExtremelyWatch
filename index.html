<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extremely Weeb - ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #FF0055;
            --bg: #0f0f13;
            --card-bg: #1a1a20;
            --text: #ffffff;
            --text-sec: #aaaaaa;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            padding-bottom: 20px;
        }

        /* Header & Logo */
        header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
        }

        .logo {
            width: 120px;
            border-radius: 50%;
            border: 3px solid var(--primary);
            box-shadow: 0 0 15px var(--primary);
        }

        h1 { margin: 10px 0 5px; font-size: 1.5rem; }
        .user-greeting { font-size: 0.9rem; color: var(--text-sec); margin-bottom: 20px; }

        /* Container */
        .container {
            padding: 0 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Continue Watching Banner (Hidden by default) */
        #continue-watching {
            display: none; /* Shows via JS if data exists */
            background: linear-gradient(90deg, #2b2b36 0%, #1a1a20 100%);
            border-right: 4px solid var(--primary);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.2s;
        }

        #continue-watching:active { transform: scale(0.98); }

        .cw-header {
            font-size: 0.8rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .cw-title { font-size: 1.1rem; margin-bottom: 3px; }
        .cw-ep { font-size: 0.9rem; color: var(--text-sec); }

        /* Anime Grid */
        .section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            border-right: 3px solid var(--primary);
            padding-right: 10px;
        }

        .anime-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .anime-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            text-decoration: none;
            color: var(--text);
            transition: transform 0.2s;
            position: relative;
        }

        .anime-card:active { transform: scale(0.96); }

        .card-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            display: block;
        }

        .card-info { padding: 10px; }
        .anime-title { font-size: 0.95rem; font-weight: bold; margin-bottom: 5px; display: block;}
        .anime-meta { font-size: 0.75rem; color: var(--text-sec); display: flex; justify-content: space-between; }
        .rating { color: #FFD700; }

    </style>
</head>
<body>

    <header>
        <img src="https://i.im.ge/2026/02/01/eFIKey.IMG-20260201-071635-425.jpeg" alt="Logo" class="logo">
        <h1>Extremely Weeb</h1>
        <div class="user-greeting" id="user-greeting">ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ Ÿäÿß ÿµÿØŸäŸÇŸä</div>
    </header>

    <div class="container">
        
        <div id="continue-watching" onclick="resumeWatching()">
            <div class="cw-header">üî• ÿ™ÿßÿ®ÿπ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©</div>
            <div class="cw-title" id="cw-anime-title">ÿßÿ≥ŸÖ ÿßŸÑÿ£ŸÜŸÖŸä ŸáŸÜÿß</div>
            <div class="cw-ep" id="cw-episode-info">ÿßŸÑÿ≠ŸÑŸÇÿ© 1</div>
        </div>

        <div class="section-title">ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿ•ÿ∂ÿßŸÅÿßÿ™</div>
        
        <div class="anime-grid">
            <a href="watch.html?id=naruto" class="anime-card">
                <img src="https://m.media-amazon.com/images/M/MV5BZmQ5NGFiNWEtMmMyMC00MDdiLTg4YjktOGY5Yzc2MDUxMTE1XkEyXkFqcGdeQXVyNTA4NzY1MzY@._V1_FMjpg_UX1000_.jpg" class="card-img" alt="Naruto">
                <div class="card-info">
                    <span class="anime-title">Naruto Shippuden</span>
                    <div class="anime-meta">
                        <span>ÿ£ŸÉÿ¥ŸÜ</span>
                        <span class="rating">‚≠ê 9.8</span>
                    </div>
                </div>
            </a>

            <a href="watch.html?id=onepiece" class="anime-card">
                <img src="https://m.media-amazon.com/images/M/MV5BODcwNWE3OTMtMDc3MS00NDFjLWE1OTAtNDU3NjgxODMxY2UyXkEyXkFqcGdeQXVyNTAyODkwOQ@@._V1_.jpg" class="card-img" alt="One Piece">
                <div class="card-info">
                    <span class="anime-title">One Piece</span>
                    <div class="anime-meta">
                        <span>ŸÖÿ∫ÿßŸÖÿ±ÿßÿ™</span>
                        <span class="rating">‚≠ê 9.9</span>
                    </div>
                </div>
            </a>
            
             <a href="watch.html?id=aot" class="anime-card">
                <img src="https://m.media-amazon.com/images/M/MV5BMTY5ODk1NzUyMl5BMl5BanBnXkFtZTgwMjMwMjM0MTE@._V1_.jpg" class="card-img" alt="AOT">
                <div class="card-info">
                    <span class="anime-title">Attack on Titan</span>
                    <div class="anime-meta">
                        <span>ÿ±ÿπÿ®</span>
                        <span class="rating">‚≠ê 10.0</span>
                    </div>
                </div>
            </a>

             <a href="watch.html?id=slaying" class="anime-card">
                <img src="https://m.media-amazon.com/images/M/MV5BODI2NjdlZWItM2JhYy00YjUyLThlZDYtODc2NjAyNDg4NjFiXkEyXkFqcGdeQXVyMTEyMjM2NDc2._V1_.jpg" class="card-img" alt="Demon Slayer">
                <div class="card-info">
                    <span class="anime-title">Demon Slayer</span>
                    <div class="anime-meta">
                        <span>ÿ¥Ÿäÿßÿ∑ŸäŸÜ</span>
                        <span class="rating">‚≠ê 9.5</span>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <script>
        // 1. Telegram Integration: Get User Name
        const tg = window.Telegram.WebApp;
        tg.expand(); // Make it full screen

        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            const firstName = tg.initDataUnsafe.user.first_name;
            document.getElementById('user-greeting').innerText = `ÿ£ŸáŸÑÿßŸã ÿ®ŸÉÿå ${firstName}`;
        }

        // 2. Load "Continue Watching" Data from LocalStorage
        const lastWatchData = JSON.parse(localStorage.getItem('extWeeb_lastWatch'));

        if (lastWatchData) {
            const cwBox = document.getElementById('continue-watching');
            document.getElementById('cw-anime-title').innerText = lastWatchData.title;
            document.getElementById('cw-episode-info').innerText = `ÿßŸÑŸÖŸàÿ≥ŸÖ ${lastWatchData.season} | ÿßŸÑÿ≠ŸÑŸÇÿ© ${lastWatchData.episode}`;
            
            // Show the banner
            cwBox.style.display = 'block';
        }

        // Function to handle clicking the banner
        function resumeWatching() {
            if (lastWatchData) {
                window.location.href = lastWatchData.url;
            }
        }
    </script>
</body>
</html>

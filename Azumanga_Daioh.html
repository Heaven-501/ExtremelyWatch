<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Azumanga Daioh</title>

<style>
:root {
    --primary:#ff0055;
    --bg:#0f0f13;
    --card:#1a1a20;
    --text:#fff;
}

body {
    margin:0;
    background:var(--bg);
    color:var(--text);
    font-family:Segoe UI,Tahoma;
}

.player {
    position:sticky;
    top:0;
    aspect-ratio:16/9;
    background:black;
}

iframe {
    width:100%;
    height:100%;
    border:none;
}

.container { padding:15px }

.servers {
    display:flex;
    gap:10px;
    margin-bottom:15px;
}

.server {
    padding:8px 12px;
    background:#25252e;
    border-radius:6px;
    cursor:pointer;
}

.server.active {
    background:var(--primary);
}

.ep {
    background:var(--card);
    padding:12px;
    border-radius:8px;
    margin-bottom:8px;
    cursor:pointer;
}

.ep.active {
    border-right:4px solid var(--primary);
}
</style>
</head>

<body>

<div class="player">
    <iframe id="player" allowfullscreen></iframe>
</div>

<div class="container">
<h2>Azumanga Daioh</h2>

<div class="servers">
    <div class="server active" onclick="setServer(0)">Server 1</div>
    <div class="server" onclick="setServer(1)">Server 2</div>
</div>

<div id="episodes"></div>
</div>

<script>
// Example: each server has 26 episode links
const servers = [
    Array.from({length:26},(_,i)=>`https://www.youtube.com/embed/dQw4w9WgXcQ?start=${i*10}`),
    Array.from({length:26},(_,i)=>`https://www.youtube.com/embed/9bZkp7q19f0?start=${i*10}`)
];

let currentServer = 0;
let currentEp = 1;

const epBox = document.getElementById("episodes");
const player = document.getElementById("player");

// Build episode list
for (let i=1;i<=26;i++) {
    const d = document.createElement("div");
    d.className="ep";
    d.innerText="الحلقة "+i;
    d.onclick=()=>loadEp(i,d);
    epBox.appendChild(d);
}

// Load episode
function loadEp(ep,el) {
    document.querySelectorAll(".ep").forEach(e=>e.classList.remove("active"));
    el.classList.add("active");
    currentEp = ep;
    player.src = servers[currentServer][ep-1]; // FIX: load specific episode

    localStorage.setItem("ext_last",JSON.stringify({
        anime:"Azumanga Daioh",
        ep:ep,
        url:"Azumanga_Daioh.html"
    }));
}

// Switch server
function setServer(i) {
    currentServer=i;
    document.querySelectorAll(".server").forEach(s=>s.classList.remove("active"));
    document.querySelectorAll(".server")[i].classList.add("active");
    player.src = servers[i][currentEp-1]; // FIX: reload current episode on new server
}

// Load first episode by default
loadEp(1, document.querySelector(".ep"));
</script>

</body>
</html>
